# MySQL优化

*reference： [MySQL优化面试题（2021最新版） - 腾讯云开发者社区-腾讯云 (tencent.com)](https://cloud.tencent.com/developer/article/1814683)*

## 1. MySQL 中有哪几种锁

```
1、表级锁： 开销小， 加锁快； 不会出现死锁； 锁定粒度大， 发生锁冲突的概率最高， 并发度最低。 
2、行级锁： 开销大， 加锁慢； 会出现死锁； 锁定粒度最小， 发生锁冲突的概率最低， 并发度也最高。
3、页面锁： 开销和加锁时间界于表锁和行锁之间； 会出现死锁； 锁定粒度界于表锁和行锁之间， 并发度一般。
```

## 2. MySQL 中有哪些不同的表格

```
 1、MyISAM
 2、Heap 
 3、Merge 
 4、INNODB 
 5、MISAM
```

## 3. 简述在MySQL 数据库中 MyISAM 和InnoDB 的区别

```
MYISAM:
1. 不支持业务，但是每次查询都是原子的；支持表级锁，即每次操作是对整个表加锁；存储表的总行数；
2. 一个MYISAM表有三个文件：索引文件、表结构文件、数据文件
3. 采用非聚集索引，索引文件的数据域存储指向数据文件的指针，辅索引与主索引基本一致，但是辅索引不用保证唯一性
```

```
INNODB：
1. 支持ACID的事务，支持事务的四种隔离级别；支持行级锁与外键约束；因此可以支持写并发；不存储总行数
2. 一个INNODB引擎存储在一个文件空间（共享表空间，表大小不受操作系统控制，一个表可能分布在多个文件里，也有可能为多个
3. 主键索引采用聚集索引（索引的数据域存储数据文件本身），辅索引的数据域存储主键的值；因此从辅索引查找数据，需要先跳过辅索引找到主键值，再访问辅索引；最好用自增主键，防止插入数据时，为维持B+树结构，文件的大调整。
```

